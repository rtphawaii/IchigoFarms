{% extends "store/base.html" %}
{% load money %}

{% block title %}Checkout · Ikigai Candles{% endblock %}

{% block content %}
  <div class="mb-6">
    <h1 class="text-2xl md:text-3xl font-semibold tracking-tight">Guest checkout</h1>
    <p class="mt-2 text-sm text-slate-600">Enter shipping details. You’ll pay securely on Stripe.</p>
  </div>

  <section class="rounded-3xl border border-black/10 bg-white/70 backdrop-blur-xl shadow-[0_10px_30px_rgba(0,0,0,0.08)]">
    <div class="p-5 lg:p-7">
      {% if form.non_field_errors %}
        <div class="mb-4 rounded-2xl border border-black/10 bg-white/70 p-4 text-sm text-slate-700">
          {{ form.non_field_errors }}
        </div>
      {% endif %}

      <form method="post" class="grid grid-cols-1 gap-4 md:grid-cols-2">
        {% csrf_token %}

        <!-- Email -->
        <div class="md:col-span-2">
          <label class="text-xs text-slate-600">Email</label>
          <input
            type="email"
            name="email"
            value="{{ form.email.value|default_if_none:'' }}"
            required
            class="mt-2 w-full rounded-2xl border border-black/10 bg-white px-4 py-3 text-sm text-slate-900 placeholder:text-slate-400
                   ring-1 ring-black/5 focus:outline-none focus:ring-2 focus:ring-slate-900/10"
            placeholder="you@example.com"
          />
          {% if form.email.errors %}<p class="mt-1 text-xs text-red-600">{{ form.email.errors }}</p>{% endif %}
        </div>

        <!-- Full name -->
        <div class="md:col-span-2">
          <label class="text-xs text-slate-600">Full name</label>
          <input
            type="text"
            name="full_name"
            value="{{ form.full_name.value|default_if_none:'' }}"
            required
            class="mt-2 w-full rounded-2xl border border-black/10 bg-white px-4 py-3 text-sm text-slate-900 placeholder:text-slate-400
                   ring-1 ring-black/5 focus:outline-none focus:ring-2 focus:ring-slate-900/10"
            placeholder="First Last"
          />
          {% if form.full_name.errors %}<p class="mt-1 text-xs text-red-600">{{ form.full_name.errors }}</p>{% endif %}
        </div>

        <!-- Address 1 -->
        <div class="md:col-span-2">
          <label class="text-xs text-slate-600">Address</label>
          <input
            type="text"
            name="address1"
            value="{{ form.address1.value|default_if_none:'' }}"
            required
            class="mt-2 w-full rounded-2xl border border-black/10 bg-white px-4 py-3 text-sm text-slate-900 placeholder:text-slate-400
                   ring-1 ring-black/5 focus:outline-none focus:ring-2 focus:ring-slate-900/10"
            placeholder="Street address"
          />
          {% if form.address1.errors %}<p class="mt-1 text-xs text-red-600">{{ form.address1.errors }}</p>{% endif %}
        </div>

        <!-- Address 2 -->
        <div class="md:col-span-2">
          <label class="text-xs text-slate-600">Apt / Unit (optional)</label>
          <input
            type="text"
            name="address2"
            value="{{ form.address2.value|default_if_none:'' }}"
            class="mt-2 w-full rounded-2xl border border-black/10 bg-white px-4 py-3 text-sm text-slate-900 placeholder:text-slate-400
                   ring-1 ring-black/5 focus:outline-none focus:ring-2 focus:ring-slate-900/10"
            placeholder="Apartment, suite, etc."
          />
          {% if form.address2.errors %}<p class="mt-1 text-xs text-red-600">{{ form.address2.errors }}</p>{% endif %}
        </div>

        <!-- City -->
        <div>
          <label class="text-xs text-slate-600">City</label>
          <input
            type="text"
            name="city"
            value="{{ form.city.value|default_if_none:'' }}"
            required
            class="mt-2 w-full rounded-2xl border border-black/10 bg-white px-4 py-3 text-sm text-slate-900
                   ring-1 ring-black/5 focus:outline-none focus:ring-2 focus:ring-slate-900/10"
          />
          {% if form.city.errors %}<p class="mt-1 text-xs text-red-600">{{ form.city.errors }}</p>{% endif %}
        </div>

        <!-- State -->
        <div>
          <label class="text-xs text-slate-600">State</label>
          <input
            type="text"
            name="state"
            value="{{ form.state.value|default_if_none:'' }}"
            required
            class="mt-2 w-full rounded-2xl border border-black/10 bg-white px-4 py-3 text-sm text-slate-900
                   ring-1 ring-black/5 focus:outline-none focus:ring-2 focus:ring-slate-900/10"
          />
          {% if form.state.errors %}<p class="mt-1 text-xs text-red-600">{{ form.state.errors }}</p>{% endif %}
        </div>

        <!-- Postal -->
        <div>
          <label class="text-xs text-slate-600">Postal code</label>
          <input
            type="text"
            name="postal_code"
            value="{{ form.postal_code.value|default_if_none:'' }}"
            required
            class="mt-2 w-full rounded-2xl border border-black/10 bg-white px-4 py-3 text-sm text-slate-900
                   ring-1 ring-black/5 focus:outline-none focus:ring-2 focus:ring-slate-900/10"
          />
          {% if form.postal_code.errors %}<p class="mt-1 text-xs text-red-600">{{ form.postal_code.errors }}</p>{% endif %}
        </div>

        <!-- Country -->
        <div>
          <label class="text-xs text-slate-600">Country (2-letter)</label>
          <input
            type="text"
            name="country"
            value="{{ form.country.value|default_if_none:'US' }}"
            required
            class="mt-2 w-full rounded-2xl border border-black/10 bg-white px-4 py-3 text-sm text-slate-900
                   ring-1 ring-black/5 focus:outline-none focus:ring-2 focus:ring-slate-900/10"
          />
          {% if form.country.errors %}<p class="mt-1 text-xs text-red-600">{{ form.country.errors }}</p>{% endif %}
        </div>

        <div class="md:col-span-2 mt-2 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
          <p class="text-xs text-slate-500">
            You’ll be redirected to Stripe to complete payment.
          </p>
          <button
            type="submit"
            class="inline-flex items-center justify-center rounded-2xl bg-slate-900 px-6 py-3 text-sm font-semibold text-white
                   hover:bg-slate-800 transition"
          >
            Continue to payment
          </button>
        </div>
      </form>
    </div>
  </section>
{% endblock %}
